<div class="w3-row">
    <div class="w3-col m12">
        <app-menu-superior></app-menu-superior>
    </div>
</div>
<div class="w3-row">
     <div class="w3-col m3">
        <app-menu-lateral></app-menu-lateral>
     </div>
     <div class="w3-col m9">
     <mat-tab-group>
        <mat-tab> 
                <ng-template mat-tab-label> Editar [{{id}}] </ng-template>
        <form [formGroup]="historiaForm" (ngSubmit)="onFormSubmit(historiaForm.value)">
                <div class="w3-row" style="padding-top:2%">
                     <div class="w3-col m12">
                        <mat-form-field style="width: 20%">
                                <input matInput 
                                       formControlName="idCopy"
                                       type="number" 
                                       placeholder="Id">
                        </mat-form-field>  
                     </div>
                </div>
                <div class="w3-row">
                        <div class="w3-col m12">
                             <mat-form-field style="width: 95%">
                                <input matInput 
                                       formControlName="titulo"
                                       placeholder="Título">
                             </mat-form-field>   
                        </div>
                </div>
                <div class="w3-row">
                     <div class="w3-col m4">
                        <mat-form-field style="width: 90%">
                                <input matInput 
                                       formControlName="dataCriacao"
                                       [matDatepicker]="picker1" 
                                       placeholder="Data de Criação">
                                        <mat-datepicker-toggle matSuffix 
                                                              [for]="picker1">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field>
                     </div>
                     <div class="w3-col m4">
                        <mat-form-field style="width: 85%">
                                <input type="time" 
                                       matInput
                                       formControlName="tempoEstimado"
                                       placeholder="Tempo Estimado">
                        </mat-form-field>
                     </div>
                     <div class="w3-col m4">
                        <mat-form-field style="width: 84%">
                                <input type="time" 
                                       matInput
                                       formControlName="tempoDecorrido"
                                       placeholder="Tempo Decorrido">
                        </mat-form-field>
                     </div>
                </div>
                <div class="w3-row">
                        <div class="w3-col m8">
                             <mat-form-field style="width: 90%">
                                <mat-select placeholder="Usuario Criador" 
                                            formControlName="usuarioAux"
                                            (selectionChange)="validaUserCriador()">
                                       <mat-option>Selecione um usuário</mat-option>
                                       <mat-option *ngFor="let usuario of usuarioService.usuariosByProjeto" 
                                                   [value]="usuario.email">
                                                    {{usuario.nome}}
                                       </mat-option>
                                </mat-select>
                             </mat-form-field>
                        </div>
                </div>
                <div class="w3-row">
                    <div class="w3-col m12" style="height: 100%;width: 95%; padding-bottom: 2%">
                           <ckeditor [editor]="Editor"
                                     formControlName="descricao"></ckeditor>
                    </div>
                </div>    
                <div class="w3-row">
                    <div class="w3-col m12" style="height: 100%;width: 95%; padding-bottom: 2%">
                        <mat-accordion>
                                <mat-expansion-panel>
                                  <mat-expansion-panel-header>
                                    <mat-panel-title>
                                      Parecer da Qualidade
                                    </mat-panel-title>
                                    
                                  </mat-expansion-panel-header>
                                  <div class="w3-row">
                                     <div class="w3-col m4">
                                           <mat-form-field style="width: 84%">
                                               <mat-select placeholder="Parecer da Qualidade" 
                                                           formControlName="parecerQualidade">
                                                      <mat-option>Selecione um parecer</mat-option>
                                                      <mat-option *ngFor="let parecer of selectParecer" 
                                                                  [value]="parecer.value">
                                                                     {{parecer.description}}
                                                      </mat-option>
                                              </mat-select>
                                             </mat-form-field>
                                         </div>
                                   </div>
                                   <div class="w3-row">
                                        <div class="w3-col m12">
                                            <mat-form-field style="width: 95%">
                                                <textarea matInput 
                                                          formControlName="descricaoParecer"
                                                          placeholder="Descrição"></textarea>
                                            </mat-form-field>
                                        </div>
                                </div>
                                  
                                </mat-expansion-panel>
                              </mat-accordion>    
                    </div>
                </div>

                <div class="w3-row">
                                <div class="w3-col m12" align="right" style="padding-right:5%"> 
                                    <button mat-raised-button 
                                            style="width: 20%"
                                            color="primary"
                                            type="submit">Salvar</button>
                                </div>
                              </div>
        </form>
        </mat-tab>
       </mat-tab-group>
     </div>    
</div>    
